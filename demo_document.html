<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="./beautiful-table.css" type="text/css"/>
    <!-- Note: <script>...</script> cannot be shortened by <script/> -->
    <script type="text/javascript" src="./matrix-client.js"></script>
  </head>

  <!-- When the body is loaded, read table definition from a <pre> tag
       and post the definition to the matrix drawing server on reverse
       proxy path '/matrix/'.  The returned HTML content is placed at
       HTML tag with element id 'table'.  -->
  <body onload="mcDrawMatrix('table_content', '/matrix/', 'table')">
    <h2>情境广告系统功能和模块</h2>
    <p>
      情境广告系统是一个后台广告服务系统。多个模块（RPC servers）构成。
      因为情境广告系统支持多种流量和多种广告，而不同类型的流量和广告需
      要做不同类型的处理，所以系统中功能繁多。每个系统功能可能涉及多个
      模块。为了便于跟踪各功能和模块之间的关系，保证系统的可维护性，下
      表列出了所有模块和功能，以及他们之间的关系。
    </p>
    <pre id="table_content">
      (
      ("UDP server"
      "frontend"
      "mixer"
      "index"
      "pCTR server"
      "pCTR training"
      "pCTR expr platform"
      "user server"
      "realtime user server"
      "user pipeline"
      "page server"
      "updater"
      "site_updater"
      "bigtable"
      "user agent"
      "interest server"
      "introspector server"
      "log server"
      "click server"
      "js log server"
      "accounter"
      "LDA"
      "classifiers"
      "keyword extractor"
      "text miner"
      "touchstone"
      "auto import blob"
      "auction log"
      "query log"
      "click log")
      (("广告投放" "targeting" "index" "mixer" "frontend")
      ("  广告bidding" "bidding" "mixer")
      ("  广告位和虚拟广告位" "virtual_place" "frontend" "mixer")
      ("广告请求" "request")
      ("检索条件构造" "query_build")
      ("广告组触发和过滤" "retrieval_and_filtering" "index" "mixer" "user server" "page server")
      ("  bigtable" "retrieval_bigtable")
      ("  index" "retrieval_index")
      ("  随机触发" "retrieval_random")
      ("  过滤" "filtering")
      ("广告组的排序和计费" "ranking_and_pricing" "pCTR server" "pCTR training")
      ("  创意选择" "creative_selection")
      ("  广告的ranking" "ranking")
      ("  广告去重" "deduplication")
      ("  广告的pricing" "pricing")
      ("广告补余" "complement")
      ("广告展现" "impression")
      ("广告点击" "click")
      ("消耗速度控制" "control_cost_rate")
      ("特定广告的promotion" "promotion")
      ("广告预览" "preview")
      ("大表相关逻辑" "bigtable")
      ("电商优化" "ebusiness_optimization")
      ("用用户信息触发和排序特定垂直领域广告" "vertical_ads_domain")
      ("exploration and exploitation" "exploration_and_exploitation")
      ("基于budget的展示控制逻辑" "impression_probability_by_budget")
      ("landing page的处理" "landing_page_processing")
      ("ip到地域的映射" "ip_to_geo_mapping")
      ("一定比例的流量上只出拍拍广告" "paipai_only_traffic")
      ("联调环境" "integrated_test_system")
      ("index白板" "index_whiteboard")
      ("预发布环境" "prelaunch_test_system")))
    </pre>
    <div id="table"></div>
  </body>
</html>
